<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Car Buy Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .input-group label { font-size: 0.75rem; font-weight: 700; color: #374151; text-transform: uppercase; letter-spacing: 0.05em; display: block; margin-bottom: 0.25rem; }
        .input-group input { width: 100%; padding: 0.5rem; border: 1px solid #E5E7EB; border-radius: 0.5rem; font-weight: 600; color: #1F2937; transition: border-color 0.2s; font-size: 0.95rem; }
        .input-group input:focus { outline: none; border-color: #6366F1; ring: 2px solid #E0E7FF; }
        .input-helper { font-size: 0.7rem; color: #6B7280; margin-top: 0.25rem; line-height: 1.3; }
        .section-title { font-size: 0.85rem; font-weight: 800; color: #111827; margin-bottom: 0.75rem; padding-bottom: 0.25rem; border-bottom: 1px solid #F3F4F6; display: flex; align-items: center; gap: 0.5rem; }
        .result-card { transition: all 0.3s ease; display: flex; flex-direction: column; height: 100%; }
        .result-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.15); }
        .card-badge { position: absolute; top: 1rem; right: 1rem; padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.05em; }
        .discipline-box { font-size: 0.75rem; line-height: 1.4; border-radius: 0.5rem; padding: 0.75rem; margin-top: auto; }
        .pros-cons { font-size: 0.75rem; margin-top: 1rem; background: #fafafa; padding: 0.75rem; border-radius: 0.5rem; }
        .pros-cons ul { list-style: none; padding: 0; margin: 0; }
        .pros-cons li { margin-bottom: 0.25rem; display: flex; align-items: flex-start; gap: 0.5rem; }
        .pro-icon { color: #10B981; }
        .con-icon { color: #EF4444; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-indigo-900 tracking-tight">Smart Car <span class="text-indigo-600">Decision Maker</span></h1>
            <p class="text-gray-500 mt-2 max-w-2xl text-sm md:text-base">
                Don't just buy a car. Build wealth while you drive.
            </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- Input Section -->
            <div class="lg:col-span-3 bg-white p-5 rounded-2xl shadow-sm border border-gray-100 h-fit sticky top-4 overflow-y-auto max-h-[90vh]">
                
                <!-- Section 1: The Car -->
                <div class="mb-6">
                    <div class="section-title text-indigo-900">
                        <i class="fas fa-car"></i> 1. The Car Cost
                    </div>
                    <div class="space-y-4">
                        <div class="input-group">
                            <label>Full Price (On-Road)</label>
                            <input type="number" id="carPrice" value="2281000">
                            <p class="input-helper">The final bill amount from the car dealer.</p>
                        </div>
                        <div class="input-group">
                            <label>Loan Interest Rate (%)</label>
                            <input type="number" id="loanRate" value="9.0" step="0.1">
                            <p class="input-helper">The extra money the bank charges you for borrowing.</p>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Your Money Strategy -->
                <div class="mb-6">
                    <div class="section-title text-emerald-800">
                        <i class="fas fa-wallet"></i> 2. Your Savings
                    </div>
                    <div class="space-y-4">
                        <div class="input-group">
                            <label>Total Savings You Have Now</label>
                            <input type="number" id="totalCash" value="600000">
                            <p class="input-helper">The total amount in your bank account right now that you <em>could</em> use.</p>
                        </div>

                        <div class="input-group bg-indigo-50 p-3 rounded-lg border border-indigo-100 -mx-2">
                            <label class="text-indigo-800">Cash You Keep (Invest Instead)</label>
                            <input type="number" id="bufferCash" value="100000" class="bg-white border-indigo-200 text-indigo-900">
                            <p class="input-helper text-indigo-700">
                                <strong>Crucial Decision:</strong> This is the amount you choose <strong>NOT</strong> to give the dealer. You keep this in your pocket to invest.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Market -->
                <div>
                    <div class="section-title text-purple-800">
                        <i class="fas fa-chart-line"></i> 3. Market Growth
                    </div>
                    <div class="space-y-4">
                        <div class="input-group">
                            <label>Investment Returns (%)</label>
                            <input type="number" id="sipRate" value="13.0" step="0.1">
                            <p class="input-helper">How much your money grows in Mutual Funds/Stocks. (Inflation is usually ~6%, so aim higher).</p>
                        </div>
                        <div class="input-group">
                            <label>Tax on Profit (%)</label>
                            <input type="number" id="taxRate" value="12.5" step="0.5">
                            <p class="input-helper">Government tax on your investment gains.</p>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Results Section -->
            <div class="lg:col-span-9 space-y-6">
                
                <!-- Main Comparison Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    
                    <!-- Scenario A: Standard -->
                    <div class="result-card bg-white rounded-2xl shadow-sm border border-gray-200 relative overflow-hidden group">
                        <div class="h-2 w-full bg-gray-400"></div>
                        <div class="p-6 flex flex-col h-full">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-gray-800">1. The "Debt Hater"</h3>
                                <p class="text-xs text-gray-500 mt-1">Pay max cash now. Take a short 5yr loan.</p>
                            </div>

                            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                                <div class="text-xs text-gray-500 uppercase font-semibold mb-1">Monthly EMI (5 Yr)</div>
                                <div class="text-2xl font-bold text-gray-800 tracking-tight" id="emiA">₹ 0</div>
                            </div>

                            <div class="pros-cons">
                                <ul>
                                    <li><i class="fas fa-check-circle pro-icon text-xs mt-1"></i> <span class="text-xs text-gray-600">Peace of Mind (Less Debt)</span></li>
                                    <li><i class="fas fa-times-circle con-icon text-xs mt-1"></i> <span class="text-xs text-gray-600"><strong>Trap:</strong> All your cash is locked in a depreciating car.</span></li>
                                    <li><i class="fas fa-times-circle con-icon text-xs mt-1"></i> <span class="text-xs text-gray-600">No Emergency Cash left.</span></li>
                                </ul>
                            </div>

                            <div class="discipline-box bg-gray-100 text-gray-600 border border-gray-200">
                                <div class="flex items-center gap-2 mb-1 font-bold text-gray-700 text-xs">
                                    <i class="fas fa-couch"></i> Discipline: Easy
                                </div>
                                Just pay the EMI.
                            </div>
                            
                            <div class="pt-4 mt-4 border-t border-gray-100 text-center">
                                <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Net Wealth (7 Yrs)</span>
                                <div class="text-xl font-bold text-gray-400 mt-1">Baseline</div>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario B: Arbitrage -->
                    <div class="result-card bg-white rounded-2xl shadow-lg border-2 border-indigo-100 relative overflow-hidden ring-4 ring-indigo-50/50">
                        <div class="h-2 w-full bg-gradient-to-r from-indigo-500 to-purple-500"></div>
                        <div class="card-badge bg-indigo-100 text-indigo-700">Recommended</div>
                        
                        <div class="p-6 flex flex-col h-full">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-indigo-900">2. The "Smart Investor"</h3>
                                <p class="text-xs text-indigo-600/80 mt-1">Keep cash. Take long 7yr loan. Invest.</p>
                            </div>

                            <div class="bg-indigo-50 rounded-xl p-4 mb-4 border border-indigo-100">
                                <div class="flex justify-between items-end mb-1">
                                    <div class="text-xs text-indigo-600 uppercase font-semibold">Monthly EMI (7 Yr)</div>
                                    <div class="text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded font-bold" id="sipB_label">Save ₹0/mo</div>
                                </div>
                                <div class="text-2xl font-bold text-indigo-900 tracking-tight" id="emiB">₹ 0</div>
                            </div>

                            <div class="pros-cons bg-indigo-50/50">
                                <ul>
                                    <li><i class="fas fa-check-circle pro-icon text-xs mt-1"></i> <span class="text-xs text-gray-600"><strong>Beats Inflation:</strong> Your cash grows faster than loan interest.</span></li>
                                    <li><i class="fas fa-check-circle pro-icon text-xs mt-1"></i> <span class="text-xs text-gray-600"><strong>Liquidity:</strong> You have cash for emergencies.</span></li>
                                    <li><i class="fas fa-exclamation-triangle text-orange-400 text-xs mt-1"></i> <span class="text-xs text-gray-600">Risk: Market fluctuations.</span></li>
                                </ul>
                            </div>

                            <!-- UPDATED DISCIPLINE BOX -->
                            <div class="discipline-box bg-indigo-50 text-indigo-800 border border-indigo-100">
                                <div class="flex items-center gap-2 mb-1 font-bold text-indigo-700 text-xs">
                                    <i class="fas fa-balance-scale"></i> Discipline: Medium
                                </div>
                                Since you can <strong>already afford</strong> the 5-year EMI, choosing the 7-year option is purely strategic. You just need to automate the investment of the extra cash.
                            </div>
                            
                            <div class="pt-4 mt-4 border-t border-indigo-100 text-center">
                                <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest">Net Wealth Gain (7 Yrs)</span>
                                <div class="text-2xl font-bold text-indigo-700 mt-1" id="netB">₹ 0</div>
                                <p class="text-[10px] text-indigo-400 mt-1">Profit after paying interest</p>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario C: The Aggressive Saver -->
                    <div class="result-card bg-white rounded-2xl shadow-sm border border-emerald-100 relative overflow-hidden group">
                        <div class="h-2 w-full bg-emerald-500"></div>
                        <div class="p-6 flex flex-col h-full">
                            <div class="mb-4">
                                <h3 class="text-lg font-bold text-emerald-900">3. The "Late Bloomer"</h3>
                                <p class="text-xs text-gray-500 mt-1">Pay loan fast (5yr). Invest later (Yrs 6-7).</p>
                            </div>

                            <div class="bg-emerald-50 rounded-xl p-4 mb-4 border border-emerald-100">
                                <div class="text-xs text-emerald-700 uppercase font-semibold mb-1">Invest Yrs 6-7</div>
                                <div class="text-2xl font-bold text-emerald-800 tracking-tight" id="emiC">₹ 0</div>
                                <div class="text-[10px] text-emerald-600 mt-1">Same amount as EMI</div>
                            </div>

                            <div class="pros-cons">
                                <ul>
                                    <li><i class="fas fa-check-circle pro-icon text-xs mt-1"></i> <span class="text-xs text-gray-600">Debt free in 5 years.</span></li>
                                    <li><i class="fas fa-times-circle con-icon text-xs mt-1"></i> <span class="text-xs text-gray-600"><strong>Lost Time:</strong> You miss 5 years of compound growth.</span></li>
                                    <li><i class="fas fa-times-circle con-icon text-xs mt-1"></i> <span class="text-xs text-gray-600">Usually lifestyle inflation eats the savings.</span></li>
                                </ul>
                            </div>

                            <div class="discipline-box bg-emerald-50 text-emerald-800 border border-emerald-100">
                                <div class="flex items-center gap-2 mb-1 font-bold text-emerald-700 text-xs">
                                    <i class="fas fa-dumbbell"></i> Discipline: Medium
                                </div>
                                Once the loan ends, you must keep "paying" that money into an investment.
                            </div>

                            <div class="pt-4 mt-4 border-t border-emerald-100 text-center">
                                <span class="text-[10px] font-bold text-emerald-500 uppercase tracking-widest">Net Wealth Gain (7 Yrs)</span>
                                <div class="text-2xl font-bold text-emerald-700 mt-1" id="netC">₹ 0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8">
                    <div class="bg-white p-4 rounded-xl border border-gray-200">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="bg-red-100 p-1.5 rounded-lg text-red-600"><i class="fas fa-chart-line-down"></i></div>
                            <h4 class="font-bold text-sm text-gray-800">Depreciation Trap</h4>
                        </div>
                        <p class="text-xs text-gray-600 leading-relaxed">
                            A car loses ~15% value every year. If you put all your money into a car (Strategy 1), you are locking cash into something that shrinks. Investing (Strategy 2) puts cash into something that grows.
                        </p>
                    </div>

                    <div class="bg-white p-4 rounded-xl border border-gray-200">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="bg-blue-100 p-1.5 rounded-lg text-blue-600"><i class="fas fa-shield-alt"></i></div>
                            <h4 class="font-bold text-sm text-gray-800">Inflation Protection</h4>
                        </div>
                        <p class="text-xs text-gray-600 leading-relaxed">
                            Inflation (~6%) eats the value of money. If your investment grows at 13%, you are beating inflation by 7%. Paying off a 9% loan is good, but growing money at 13% is mathematically better.
                        </p>
                    </div>

                    <div class="bg-white p-4 rounded-xl border border-gray-200">
                        <div class="flex items-center gap-2 mb-2">
                            <div class="bg-green-100 p-1.5 rounded-lg text-green-600"><i class="fas fa-hand-holding-usd"></i></div>
                            <h4 class="font-bold text-sm text-gray-800">Liquidity Power</h4>
                        </div>
                        <p class="text-xs text-gray-600 leading-relaxed">
                            "Liquidity" means how fast you can get cash. 
                            <strong>Strategy 1:</strong> Money is stuck in the car's metal. 
                            <strong>Strategy 2:</strong> Money is in a fund you can sell in 2 days if you have a medical emergency.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Inputs
        const inputs = {
            price: document.getElementById('carPrice'),
            totalCash: document.getElementById('totalCash'),
            buffer: document.getElementById('bufferCash'),
            loanRate: document.getElementById('loanRate'),
            sipRate: document.getElementById('sipRate'),
            taxRate: document.getElementById('taxRate')
        };

        // Utility
        const formatCurrency = (num) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 }).format(num);
        
        // Financial Formulas
        const calculateEMI = (p, r, n) => {
            if (p <= 0) return 0;
            const rate = r / 1200;
            return (p * rate * Math.pow(1 + rate, n)) / (Math.pow(1 + rate, n) - 1);
        };
        
        const fvSIP = (amt, r, n) => {
            const i = r / 1200;
            return amt * ((Math.pow(1 + i, n) - 1) / i) * (1 + i);
        };

        const fvLumpsum = (amt, r, n_months) => {
            const i = r / 1200;
            return amt * Math.pow(1 + i, n_months);
        };

        const update = () => {
            const P = parseFloat(inputs.price.value) || 0;
            const C = parseFloat(inputs.totalCash.value) || 0;
            const B = parseFloat(inputs.buffer.value) || 0;
            const rLoan = parseFloat(inputs.loanRate.value) || 0;
            const rInv = parseFloat(inputs.sipRate.value) || 0;
            const rTax = parseFloat(inputs.taxRate.value) || 0;

            // --- Scenario A: Traditionalist (5Y, Full Cash) ---
            const dpA = C; 
            const loanA = Math.max(0, P - dpA);
            const emiA = calculateEMI(loanA, rLoan, 60);
            const totalPaidA = emiA * 60;
            const interestA = Math.max(0, totalPaidA - loanA);

            document.getElementById('emiA').innerText = formatCurrency(emiA);

            // --- Scenario B: Arbitrage (7Y, Keep Buffer) ---
            const dpB = Math.max(0, C - B);
            const loanB = Math.max(0, P - dpB);
            const emiB = calculateEMI(loanB, rLoan, 84);
            const totalPaidB = emiB * 84;
            const interestB = Math.max(0, totalPaidB - loanB);
            
            // Investments
            const fvBuffer = fvLumpsum(B, rInv, 84);
            const gainBuffer = fvBuffer - B;
            const taxBuffer = gainBuffer > 0 ? gainBuffer * (rTax/100) : 0;
            const netBuffer = fvBuffer - taxBuffer;

            const monthlySurplus = Math.max(0, emiA - emiB);
            const fvSip = fvSIP(monthlySurplus, rInv, 84);
            const investedSip = monthlySurplus * 84;
            const gainSip = fvSip - investedSip;
            const taxSip = gainSip > 0 ? gainSip * (rTax/100) : 0;
            const netSip = fvSip - taxSip;

            const extraInterest = interestB - interestA;
            const totalWealthB = netBuffer + netSip; 
            const finalGainB = totalWealthB - extraInterest;

            document.getElementById('emiB').innerText = formatCurrency(emiB);
            document.getElementById('sipB_label').innerText = `Save ${formatCurrency(monthlySurplus)}/mo`;
            
            const elNetB = document.getElementById('netB');
            elNetB.innerText = (finalGainB > 0 ? "+" : "") + formatCurrency(finalGainB);
            elNetB.className = `text-2xl font-bold mt-1 ${finalGainB > 0 ? 'text-indigo-700' : 'text-red-500'}`;


            // --- Scenario C: Wealth Builder (5Y, Full Cash, Invest Later) ---
            const emiC = emiA; 
            const interestC = interestA;

            const fvC = fvSIP(emiC, rInv, 24);
            const investedC = emiC * 24;
            const gainC = fvC - investedC;
            const taxC = gainC > 0 ? gainC * (rTax/100) : 0;
            const finalGainC = fvC - taxC;

            document.getElementById('emiC').innerText = formatCurrency(emiC);
            const elNetC = document.getElementById('netC');
            elNetC.innerText = "+" + formatCurrency(finalGainC);
        };

        Object.values(inputs).forEach(el => el.addEventListener('input', update));
        update();

    </script>
</body>
</html>
